plugins {
    id 'java'
    id 'eclipse'
}

sourceCompatibility = targetCompatibility = '1.8'

dependencies {
    compile files('lib/spigot-api-1.16.5/lib-spigot-api-1.16.5.jar')
    implementation 'org.javacord:javacord:3.3.0'
    runtimeOnly 'org.apache.logging.log4j:log4j-core:2.11.0'
}

sourceSets {
    main {
        java {
            srcDirs 'src/main/java'
        }
        resources {
            srcDirs 'src/main/resource'
            srcDirs 'src/main/config'
        }
    }
}

repositories {
    jcenter()
    mavenCentral() 
}

jar {
	destinationDir = file("exports/")
	from {
		configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
	}
}

eclipse.classpath.file.whenMerged { cp ->
	def fileReferenceFactory = new org.gradle.plugins.ide.eclipse.model.internal.FileReferenceFactory()
	def entry = cp.entries.find{ entry -> entry.path.endsWith('lib/spigot-api-1.16.5/lib-spigot-api-1.16.5.jar') }
	entry.javadocPath = fileReferenceFactory.fromFile(file('lib/spigot-api-1.16.5/lib-spigot-api-1.16.5-javadoc.jar'))
	entry.sourcePath = fileReferenceFactory.fromFile(file('lib/spigot-api-1.16.5/lib-spigot-api-1.16.5-sources.jar'))
}
